(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[114],{4416:function(e,t,s){Promise.resolve().then(s.bind(s,4985))},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8755).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},4985:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var a=s(7437),l=s(2265),r=s(7648),n=s(5805),i=s(8755);let c=(0,i.Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var d=s(1804),x=s(407),o=s(2208),m=s(8906),u=s(3478),p=s(6376),h=s(2671),y=s(3448);let j={primary:{bg:"bg-primary-muted",text:"text-primary",border:"border-l-primary"},secondary:{bg:"bg-secondary-muted",text:"text-secondary",border:"border-l-secondary"},warning:{bg:"bg-warning-muted",text:"text-warning",border:"border-l-warning"},danger:{bg:"bg-danger-muted",text:"text-danger",border:"border-l-danger"}};function f(e){let{title:t,value:s,subtitle:l,icon:r,accentColor:n="primary",className:i}=e,c=j[n];return(0,a.jsx)("div",{className:(0,y.cn)("glass-card-static p-5 border-l-2",c.border,i),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs font-medium uppercase tracking-wider text-text-muted",children:t}),(0,a.jsx)("p",{className:"text-2xl font-heading font-bold text-text",children:s}),l&&(0,a.jsx)("p",{className:"text-xs text-text-secondary",children:l})]}),(0,a.jsx)("div",{className:(0,y.cn)("p-2.5 rounded-xl",c.bg),children:(0,a.jsx)(r,{size:20,className:c.text})})]})})}function g(e){let{tabs:t,activeTab:s,onChange:l,className:r}=e;return(0,a.jsx)("div",{className:(0,y.cn)("flex items-center gap-1 p-1 rounded-xl bg-white/[0.03] border border-white/[0.06]",r),children:t.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>l(e.id),className:(0,y.cn)("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200",s===e.id?"bg-white/[0.08] text-text shadow-sm":"text-text-muted hover:text-text-secondary hover:bg-white/[0.03]"),children:[e.icon,e.label]},e.id))})}var b=s(8711),N=s(8828),v=s(6337),w=s(9322);let Z=(0,i.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var E=s(6334);let k=(0,l.forwardRef)((e,t)=>{let{label:s,hint:l,error:r,className:n,id:i,...c}=e,d=i||(null==s?void 0:s.toLowerCase().replace(/\s+/g,"-"));return(0,a.jsxs)("div",{className:"space-y-1.5",children:[s&&(0,a.jsx)("label",{htmlFor:d,className:"block text-sm font-medium text-text-secondary",children:s}),(0,a.jsx)("input",{ref:t,id:d,className:(0,y.cn)("w-full px-4 py-2.5 rounded-xl text-sm text-text","bg-white/[0.03] border border-white/[0.08]","placeholder:text-text-muted","focus:outline-none focus:border-primary/40 focus:ring-1 focus:ring-primary/20","transition-all duration-200",r&&"border-danger/40 focus:border-danger/40 focus:ring-danger/20",n),...c}),l&&!r&&(0,a.jsx)("p",{className:"text-xs text-text-muted",children:l}),r&&(0,a.jsx)("p",{className:"text-xs text-danger",children:r})]})});k.displayName="Input";var z=s(2489);function C(e){let{open:t,onClose:s,title:r,description:n,children:i,className:c}=e,d=(0,l.useRef)(null),x=(0,l.useCallback)(e=>{"Escape"===e.key&&s()},[s]);return((0,l.useEffect)(()=>(t&&(document.addEventListener("keydown",x),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",x),document.body.style.overflow=""}),[t,x]),t)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{ref:d,className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:s}),(0,a.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"dialog-title",className:(0,y.cn)("relative z-10 w-full max-w-lg animate-slide-up","bg-surface border border-white/[0.06] rounded-2xl shadow-2xl",c),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between p-6 pb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{id:"dialog-title",className:"text-lg font-heading font-bold text-text",children:r}),n&&(0,a.jsx)("p",{className:"mt-1 text-sm text-text-secondary",children:n})]}),(0,a.jsx)("button",{type:"button",onClick:s,className:"p-1.5 rounded-lg text-text-muted hover:text-text hover:bg-white/5 transition-colors",children:(0,a.jsx)(z.Z,{size:18})})]}),(0,a.jsx)("div",{className:"p-6 pt-4",children:i})]})]}):null}function S(e){let{open:t,onClose:s,onSuccess:r}=e,{payGramCore:n,contractsReady:i}=(0,u.$)(),[c,d]=(0,l.useState)(""),[x,o]=(0,l.useState)(""),[m,p]=(0,l.useState)(""),[h,y]=(0,l.useState)(!1),[j,f]=(0,l.useState)(null);function g(){d(""),o(""),p(""),f(null),s()}async function b(e){if(e.preventDefault(),n){y(!0),f(null);try{let e=parseInt(x,10);if(isNaN(e)||e<=0)throw Error("Salary must be a positive number");let t=await n.addEmployeePlaintext(c,e,m);await t.wait(),f({type:"success",message:"Employee added successfully"}),setTimeout(()=>{g(),null==r||r()},1500)}catch(e){f({type:"error",message:e instanceof Error?e.message:"Failed to add employee"})}finally{y(!1)}}}return(0,a.jsx)(C,{open:t,onClose:g,title:"Add Employee",description:"Register a new team member with encrypted salary",children:(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsx)(k,{label:"Wallet Address",value:c,onChange:e=>d(e.target.value),placeholder:"0x...",required:!0,hint:"Employee's Ethereum address"}),(0,a.jsx)(k,{label:"Monthly Salary (cUSDC)",type:"number",value:x,onChange:e=>o(e.target.value),placeholder:"5000",min:"1",required:!0,hint:"Encrypted on-chain via FHE"}),(0,a.jsx)(k,{label:"Role",value:m,onChange:e=>p(e.target.value),placeholder:"e.g. Senior Engineer",required:!0}),(0,a.jsxs)("div",{className:"pt-2 space-y-3",children:[(0,a.jsxs)(E.Z,{type:"submit",loading:h,disabled:!i,className:"w-full",size:"lg",children:[(0,a.jsx)(v.Z,{size:14}),h?"Submitting...":"Add Employee"]}),!i&&(0,a.jsxs)("p",{className:"flex items-center gap-1.5 text-xs text-warning",children:[(0,a.jsx)(w.Z,{size:12}),"Connect wallet to a supported network first"]}),(0,a.jsx)("p",{className:"text-[11px] text-text-muted leading-relaxed",children:"Salary is encrypted on-chain via FHE. Only the employee and employer can decrypt their own values."})]}),j&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg text-sm ".concat("success"===j.type?"bg-primary-muted text-primary":"bg-danger-muted text-danger"),children:["success"===j.type?(0,a.jsx)(Z,{size:14}):(0,a.jsx)(w.Z,{size:14}),j.message]})]})})}var T=s(7168),D=s(8355),P=s(8508),A=s(261);function H(e){let{onAddEmployee:t,isOwner:s}=e,{payGramCore:r,contractsReady:i}=(0,u.$)(),[c,d]=(0,l.useState)([]),[x,o]=(0,l.useState)(!1),[m,y]=(0,l.useState)(!1),j=(0,l.useCallback)(async()=>{if(!r){y(!0);return}o(!0);try{let e=await r.getEmployeeList(),t=[];for(let s of e)try{let e=await r.getEmployee(s);t.push({wallet:e.empWallet,isActive:e.isActive,hireDate:e.hireDate,lastPayDate:e.lastPayDate,role:e.role})}catch(e){}d(t),y(0===t.length)}catch(e){y(!0)}finally{o(!1)}},[r]);(0,l.useEffect)(()=>{i?j():y(!0)},[i,j]);let f=m?p.b6:c;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-sm font-heading font-bold text-text",children:"Employee Roster"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[m&&(0,a.jsx)(b.Z,{variant:"warning",size:"sm",children:"Demo Data"}),(0,a.jsxs)(E.Z,{variant:"ghost",size:"sm",onClick:j,disabled:x,children:[(0,a.jsx)(T.Z,{size:13,className:x?"animate-spin":""}),"Refresh"]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)(E.Z,{variant:"primary",size:"sm",onClick:t,disabled:!s,children:"Add Employee"}),!s&&(0,a.jsx)("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2.5 py-1.5 rounded-lg bg-surface-elevated text-[11px] text-text-muted whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none border border-white/[0.08]",children:"Only contract owner can add employees"})]})]})]}),0===f.length?(0,a.jsxs)("div",{className:"glass-card-static p-12 text-center",children:[(0,a.jsx)(n.Z,{size:40,className:"mx-auto mb-3 text-text-muted"}),(0,a.jsx)("p",{className:"text-sm font-medium text-text mb-1",children:"No employees yet"}),(0,a.jsx)("p",{className:"text-xs text-text-muted mb-4",children:"Add your first team member to get started"}),(0,a.jsx)(E.Z,{size:"sm",onClick:t,disabled:!s,children:"Add Employee"})]}):(0,a.jsx)("div",{className:"glass-card-static overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-left text-text-muted border-b border-white/[0.06]",children:[(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Address"}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Role"}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Trust Tier"}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Salary"}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Hire Date"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-white/[0.03]",children:f.map((e,t)=>{let s="tier"in e,l=s?e.address:e.wallet,r=s?"active"===e.status:e.isActive,n=e.role,i=s?e.tier:"unscored",c=s?new Date(e.hireDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):(0,D.i$)(e.hireDate);return(0,a.jsxs)("tr",{className:"text-text-secondary hover:bg-white/[0.02] transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(A.Z,{status:r?"active":"inactive",size:"md"})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(h.Z,{address:l})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(b.Z,{variant:"outline",size:"sm",children:n})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(P.Z,{tier:i,size:"sm"})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 text-xs text-text-muted font-mono",children:[(0,a.jsx)(v.Z,{size:10}),"Encrypted"]})}),(0,a.jsx)("td",{className:"px-4 py-3 text-xs text-text-muted",children:c})]},l+t)})})]})})})]})}var R=s(4286),L=s(1723);let M=(0,i.Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);function $(e){let{isOwner:t}=e,{payGramCore:s,contractsReady:r}=(0,u.$)(),[n,i]=(0,l.useState)(0),[c,d]=(0,l.useState)(0),[x,o]=(0,l.useState)(!1),[m,h]=(0,l.useState)(!1),[y,j]=(0,l.useState)(!1),[f,g]=(0,l.useState)(null),N=(0,l.useCallback)(async()=>{if(!s){j(!0),i(p.sx.activeEmployees),d(p.sx.totalPayrolls);return}try{let e=await s.activeEmployeeCount();i(Number(e));let t=await s.totalPayrollsExecuted();d(Number(t)),j(!1)}catch(e){j(!0),i(p.sx.activeEmployees),d(p.sx.totalPayrolls)}},[s]);async function k(){if(s){o(!0),h(!1),g(null);try{let e=await s.executePayroll();await e.wait(),g({type:"success",message:"Payroll executed successfully"}),N()}catch(e){g({type:"error",message:e instanceof Error?e.message:"Failed to execute payroll"})}finally{o(!1)}}}return(0,l.useEffect)(()=>{N()},[N]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"glass-card-static p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-5",children:[(0,a.jsx)("h3",{className:"text-sm font-heading font-bold text-text",children:"Payroll Summary"}),y&&(0,a.jsx)(b.Z,{variant:"warning",size:"sm",children:"Demo Data"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"p-3 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[(0,a.jsx)("p",{className:"text-xs text-text-muted mb-0.5",children:"Active Employees"}),(0,a.jsx)("p",{className:"text-xl font-heading font-bold text-text",children:n})]}),(0,a.jsxs)("div",{className:"p-3 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[(0,a.jsx)("p",{className:"text-xs text-text-muted mb-0.5",children:"Total Payrolls"}),(0,a.jsx)("p",{className:"text-xl font-heading font-bold text-text",children:c})]})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,a.jsx)("p",{className:"text-xs text-text-muted uppercase tracking-wider",children:"Routing by Trust Tier"}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-primary-muted/50 border border-primary/10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(R.Z,{size:14,className:"text-primary"}),(0,a.jsx)("span",{className:"text-xs text-text-secondary",children:"High Trust"})]}),(0,a.jsx)("span",{className:"text-xs font-mono text-primary",children:"Instant"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-warning-muted/50 border border-warning/10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(L.Z,{size:14,className:"text-warning"}),(0,a.jsx)("span",{className:"text-xs text-text-secondary",children:"Medium Trust"})]}),(0,a.jsx)("span",{className:"text-xs font-mono text-warning",children:"24h Hold"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-danger-muted/50 border border-danger/10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{size:14,className:"text-danger"}),(0,a.jsx)("span",{className:"text-xs text-text-secondary",children:"Low Trust"})]}),(0,a.jsx)("span",{className:"text-xs font-mono text-danger",children:"Escrow"})]})]})]}),(0,a.jsxs)(E.Z,{onClick:()=>h(!0),disabled:!r||0===n||!t,className:"w-full",size:"lg",children:[(0,a.jsx)(M,{size:16}),"Execute Payroll"]}),!r&&(0,a.jsxs)("p",{className:"flex items-center gap-1.5 mt-3 text-xs text-warning",children:[(0,a.jsx)(w.Z,{size:12}),"Connect wallet to execute payroll"]}),r&&!t&&(0,a.jsxs)("p",{className:"flex items-center gap-1.5 mt-3 text-xs text-text-muted",children:[(0,a.jsx)(v.Z,{size:12}),"Only contract owner can execute payroll"]}),f&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3 p-3 rounded-lg text-sm ".concat("success"===f.type?"bg-primary-muted text-primary":"bg-danger-muted text-danger"),children:["success"===f.type?(0,a.jsx)(Z,{size:14}):(0,a.jsx)(w.Z,{size:14}),f.message]})]}),(0,a.jsx)(C,{open:m,onClose:()=>h(!1),title:"Confirm Payroll Execution",description:"This will process payments for ".concat(n," active employee").concat(1!==n?"s":"","."),children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-text-secondary",children:"Trust-gated routing will determine payment flows based on each employee's encrypted trust score. This operation cannot be undone."}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-white/[0.02]",children:[(0,a.jsx)("span",{className:"text-xs text-text-secondary",children:"High Trust employees"}),(0,a.jsx)("span",{className:"text-xs text-primary",children:"Instant transfer"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-white/[0.02]",children:[(0,a.jsx)("span",{className:"text-xs text-text-secondary",children:"Medium Trust employees"}),(0,a.jsx)("span",{className:"text-xs text-warning",children:"24h delayed"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-white/[0.02]",children:[(0,a.jsx)("span",{className:"text-xs text-text-secondary",children:"Low Trust employees"}),(0,a.jsx)("span",{className:"text-xs text-danger",children:"Escrowed"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,a.jsx)(E.Z,{onClick:k,loading:x,className:"flex-1",children:"Confirm Execute"}),(0,a.jsx)(E.Z,{variant:"outline",onClick:()=>h(!1),disabled:x,children:"Cancel"})]})]})})]})}var O=s(8736),q=s(8705);function I(){let{payGramCore:e,contractsReady:t}=(0,u.$)(),[s,r]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!1),x=(0,l.useCallback)(async()=>{if(!e){d(!0);return}i(!0);try{let t=await e.nextPaymentId(),s=Number(t),a=[];for(let t=0;t<s&&t<50;t++)try{let s=await e.getPendingPayment(t);a.push({id:t,employee:s.employee,status:Number(s.status),createdAt:s.createdAt,releaseTime:s.releaseTime,milestone:s.milestone})}catch(e){}r(a.reverse()),d(0===a.length)}catch(e){d(!0)}finally{i(!1)}},[e]);(0,l.useEffect)(()=>{t?x():d(!0)},[t,x]);let o=e=>{var t;return null!==(t=q.R$[e])&&void 0!==t?t:"Unknown"};function m(e){if("string"==typeof e)switch(e){case"completed":return"primary";case"processing":return"warning";default:return"default"}switch(e){case 1:return"primary";case 2:return"warning";case 3:return"danger";case 4:return"secondary";default:return"default"}}return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-sm font-heading font-bold text-text",children:"Payment History"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[c&&(0,a.jsx)(b.Z,{variant:"warning",size:"sm",children:"Demo Data"}),(0,a.jsxs)(E.Z,{variant:"ghost",size:"sm",onClick:x,disabled:n,children:[(0,a.jsx)(T.Z,{size:13,className:n?"animate-spin":""}),"Refresh"]})]})]}),c?(0,a.jsx)(U,{data:p.oJ,statusVariant:m}):0===s.length?(0,a.jsxs)("div",{className:"glass-card-static p-12 text-center",children:[(0,a.jsx)(O.Z,{size:40,className:"mx-auto mb-3 text-text-muted"}),(0,a.jsx)("p",{className:"text-sm font-medium text-text mb-1",children:"No payments recorded yet"}),(0,a.jsx)("p",{className:"text-xs text-text-muted",children:"Execute a payroll to see payment records here"})]}):(0,a.jsx)("div",{className:"glass-card-static overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-left text-text-muted border-b border-white/[0.06]",children:[(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"ID"}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Employee"}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Created"}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Release"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-white/[0.03]",children:s.map(e=>(0,a.jsxs)("tr",{className:"text-text-secondary hover:bg-white/[0.02] transition-colors",children:[(0,a.jsxs)("td",{className:"px-4 py-3 font-mono text-xs",children:["#",e.id]}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(h.Z,{address:e.employee})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(b.Z,{variant:m(e.status),size:"sm",children:o(e.status)})}),(0,a.jsx)("td",{className:"px-4 py-3 text-xs text-text-muted",children:(0,D.i$)(e.createdAt)}),(0,a.jsx)("td",{className:"px-4 py-3 text-xs text-text-muted",children:e.releaseTime>0n?(0,D.i$)(e.releaseTime):"—"})]},e.id))})]})})})]})}function U(e){let{data:t,statusVariant:s}=e;return(0,a.jsx)("div",{className:"glass-card-static overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-left text-text-muted border-b border-white/[0.06]",children:[(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Date"}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Employees"}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Type"}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-xs",children:"Total"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-white/[0.03]",children:t.map(e=>(0,a.jsxs)("tr",{className:"text-text-secondary hover:bg-white/[0.02] transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-xs",children:new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-xs",children:e.employees}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(b.Z,{variant:s(e.status),size:"sm",children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)(b.Z,{variant:"outline",size:"sm",children:[(0,a.jsx)(L.Z,{size:10}),e.type]})}),(0,a.jsx)("td",{className:"px-4 py-3 text-xs font-mono text-text-muted",children:"Encrypted"})]},e.id))})]})})})}let _=[{id:"employees",label:"Employees",icon:(0,a.jsx)(n.Z,{size:14})},{id:"payroll",label:"Run Payroll",icon:(0,a.jsx)(c,{size:14})},{id:"history",label:"Payment History",icon:(0,a.jsx)(d.Z,{size:14})}];function F(){let{address:e,isConnected:t,isSupportedChain:s,contractsReady:i,payGramCore:y}=(0,u.$)(),[j,v]=(0,l.useState)("employees"),[w,Z]=(0,l.useState)(!1),[E,k]=(0,l.useState)(!1),z=(0,l.useCallback)(async()=>{if(!y||!e){k(!1);return}try{let t=await y.owner();k(t.toLowerCase()===e.toLowerCase())}catch(e){k(!1)}},[y,e]);(0,l.useEffect)(()=>{z()},[z]);let C=t&&s;return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-text-muted mb-6",children:[(0,a.jsx)(r.default,{href:"/",className:"hover:text-text transition-colors",children:"Home"}),(0,a.jsx)(x.Z,{size:12}),(0,a.jsx)("span",{className:"text-text-secondary",children:"Employer"})]}),(0,a.jsx)(N.Z,{}),C&&i&&!E&&(0,a.jsxs)("div",{className:"flex items-center gap-2.5 px-4 py-3 mb-4 rounded-xl bg-white/[0.04] border border-white/[0.08]",children:[(0,a.jsx)(o.Z,{size:16,className:"text-text-muted shrink-0"}),(0,a.jsxs)("p",{className:"text-sm text-text-secondary",children:[(0,a.jsx)("span",{className:"font-medium text-text",children:"View Mode"})," ","— Connect as contract owner to manage payroll"]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-8 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-heading font-bold text-text",children:"Employer Dashboard"}),(0,a.jsx)("p",{className:"text-sm text-text-secondary mt-1",children:"Manage employees, execute payroll, and track payments"})]}),t&&e&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.Z,{address:e}),!s&&(0,a.jsx)(b.Z,{variant:"danger",size:"sm",children:"Wrong Network"})]})]}),!C&&(0,a.jsxs)("div",{className:"glass-card p-12 text-center",children:[(0,a.jsx)(d.Z,{size:48,className:"mx-auto mb-4 text-text-muted"}),(0,a.jsx)("h2",{className:"text-lg font-heading font-bold text-text mb-2",children:t?"Switch Network":"Connect Your Wallet"}),(0,a.jsx)("p",{className:"text-sm text-text-secondary mb-1",children:t?"Please switch to Sepolia to use this dashboard":"Connect your wallet to access the employer dashboard"}),(0,a.jsx)("p",{className:"text-xs text-text-muted",children:"Showing demo data below"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mt-8 mb-8",children:[(0,a.jsx)(f,{title:"Total Employees",value:C&&i?"...":p.sx.totalEmployees,icon:n.Z,accentColor:"primary"}),(0,a.jsx)(f,{title:"Active Payrolls",value:C&&i?"...":p.sx.totalPayrolls,icon:c,accentColor:"secondary"}),(0,a.jsx)(f,{title:"Total Distributed",value:C&&i?"...":"".concat(p.sx.totalDistributed," cUSDC"),icon:d.Z,accentColor:"primary"}),(0,a.jsx)(f,{title:"Avg Trust Score",value:C&&i?"...":p.sx.avgTrustScore,icon:m.Z,accentColor:"warning"})]}),(0,a.jsx)(g,{tabs:_,activeTab:j,onChange:v,className:"mb-6"}),(0,a.jsxs)("div",{className:"min-h-[400px]",children:["employees"===j&&(0,a.jsx)(H,{onAddEmployee:()=>Z(!0),isOwner:E}),"payroll"===j&&(0,a.jsx)($,{isOwner:E}),"history"===j&&(0,a.jsx)(I,{})]}),(0,a.jsx)(S,{open:w,onClose:()=>Z(!1)})]})}},261:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(7437),l=s(3448);let r={active:"bg-primary",pending:"bg-warning",inactive:"bg-text-muted",error:"bg-danger"},n={sm:"h-1.5 w-1.5",md:"h-2 w-2"};function i(e){let{status:t,size:s="sm",className:i}=e;return(0,a.jsxs)("span",{className:(0,l.cn)("relative inline-flex",n[s],i),children:[("active"===t||"pending"===t||"error"===t)&&(0,a.jsx)("span",{className:(0,l.cn)("absolute inline-flex h-full w-full rounded-full opacity-75 animate-ping",r[t])}),(0,a.jsx)("span",{className:(0,l.cn)("relative inline-flex rounded-full",n[s],r[t])})]})}}},function(e){e.O(0,[598,543,684,31,971,117,744],function(){return e(e.s=4416)}),_N_E=e.O()}]);