(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[487],{9873:function(e,t,s){Promise.resolve().then(s.bind(s,2394))},2394:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var l=s(7437),a=s(3478),r=s(8355),n=s(2265),i=s(8705);function c(){let{payGramCore:e,trustScoring:t,address:s,contractsReady:r}=(0,a.$)(),[c,o]=(0,n.useState)(null),[x,m]=(0,n.useState)(null),[u,h]=(0,n.useState)(null),[p,j]=(0,n.useState)(!1),[b,g]=(0,n.useState)(!1);async function f(){if(e&&t&&s){g(!0);try{let l=await e.isActiveEmployee(s);if(o(l),l){let t=await e.getEmployee(s);m(t.role)}await t.hasScore(s)?h("MEDIUM"):h("LOW")}catch(e){o(!1)}finally{g(!1),j(!0)}}}let N=u?i.c_[u]:null;return(0,l.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/50 p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"My Employment"}),r?p?!1===c?(0,l.jsx)("p",{className:"text-sm text-slate-400",children:"Your wallet is not registered as an active employee."}):(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"rounded-lg bg-slate-800/50 p-4",children:[(0,l.jsx)("p",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Role"}),(0,l.jsx)("p",{className:"text-lg font-medium text-white mt-1",children:null!=x?x:"Unknown"})]}),(0,l.jsxs)("div",{className:"rounded-lg bg-slate-800/50 p-4",children:[(0,l.jsx)("p",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Your Salary"}),(0,l.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,l.jsx)("span",{className:"text-lg font-mono text-slate-400",children:"*** Encrypted ***"}),(0,l.jsx)("button",{className:"px-3 py-1 rounded-lg bg-emerald-600/20 border border-emerald-600/40 text-emerald-400 text-xs font-medium hover:bg-emerald-600/30 transition-colors",onClick:()=>{alert("Decryption requires FHE reencryption gateway — coming soon")},children:"Decrypt"})]})]}),N&&(0,l.jsxs)("div",{className:"rounded-lg bg-slate-800/50 p-4",children:[(0,l.jsx)("p",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Trust Tier"}),(0,l.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,l.jsx)(d,{tier:u}),(0,l.jsx)("span",{className:"text-sm text-slate-400",children:N.description})]})]})]}):(0,l.jsx)("button",{onClick:f,disabled:b,className:"px-4 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-medium transition-colors",children:b?"Loading...":"Load My Info"}):(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Connect wallet to view your details"})]})}function d(e){let{tier:t}=e,s=i.c_[t];return(0,l.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium border ".concat({green:"bg-emerald-900/50 text-emerald-400 border-emerald-800",yellow:"bg-yellow-900/50 text-yellow-400 border-yellow-800",red:"bg-red-900/50 text-red-400 border-red-800"}[s.color]),children:["HIGH"===t&&(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"})}),"MEDIUM"===t&&(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),"LOW"===t&&(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"})}),s.label]})}function o(){let{payGramCore:e,address:t,contractsReady:s}=(0,a.$)(),[c,d]=(0,n.useState)([]),[o,x]=(0,n.useState)(!1),m=(0,n.useCallback)(async()=>{if(e&&t){x(!0);try{let s=await e.getPendingPaymentsForEmployee(t),l=[];for(let t of s)try{let s=await e.getPendingPayment(t);l.push({id:Number(t),status:Number(s.status),createdAt:s.createdAt,releaseTime:s.releaseTime,milestone:s.milestone})}catch(e){}d(l.reverse())}catch(e){}finally{x(!1)}}},[e,t]);(0,n.useEffect)(()=>{s&&t&&m()},[s,t,m]);let u=e=>{var t;return null!==(t=i.R$[e])&&void 0!==t?t:"Unknown"},h=e=>{switch(e){case 1:return"text-emerald-400 bg-emerald-900/50";case 2:return"text-yellow-400 bg-yellow-900/50";case 3:return"text-red-400 bg-red-900/50";case 4:return"text-blue-400 bg-blue-900/50";case 5:return"text-slate-400 bg-slate-800";default:return"text-slate-500 bg-slate-800"}};return(0,l.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/50 p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-white",children:"My Payments"}),(0,l.jsx)("button",{onClick:m,disabled:o||!s,className:"px-3 py-1 rounded-lg bg-slate-800 hover:bg-slate-700 disabled:opacity-50 text-slate-300 text-xs font-medium border border-slate-700 transition-colors",children:o?"Loading...":"Refresh"})]}),s&&t?0===c.length?(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"No payment records found"}):(0,l.jsx)("div",{className:"space-y-3",children:c.map(e=>(0,l.jsxs)("div",{className:"rounded-lg bg-slate-800/50 p-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("span",{className:"text-sm font-mono text-slate-300",children:["Payment #",e.id]}),(0,l.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(h(e.status)),children:u(e.status)})]}),(0,l.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Created ",(0,r.i$)(e.createdAt),e.releaseTime>0n&&" • Releases ".concat((0,r.i$)(e.releaseTime))]}),e.milestone&&(0,l.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:e.milestone})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("span",{className:"text-sm font-mono text-slate-400",children:"*** cPAY"}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Encrypted"})]})]},e.id))}):(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Connect wallet to view your payments"})]})}function x(){let{address:e,isConnected:t,chainName:s,isSupportedChain:n}=(0,a.$)();return(0,l.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-8 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Employee Portal"}),(0,l.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"View your salary, trust tier, and payment history"})]}),t&&(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Connected as"}),(0,l.jsx)("p",{className:"text-sm font-mono text-slate-300",children:(0,r.FP)(null!=e?e:"")}),s&&(0,l.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:s})]})]}),t?n?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)(c,{}),(0,l.jsx)(o,{})]}):(0,l.jsx)("div",{className:"rounded-xl border border-red-900/50 bg-red-950/30 p-8 text-center",children:(0,l.jsx)("p",{className:"text-sm text-red-400",children:"Please switch to Sepolia or Ethereum Mainnet."})}):(0,l.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/50 p-12 text-center",children:[(0,l.jsx)("svg",{className:"w-12 h-12 text-slate-600 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),(0,l.jsx)("h2",{className:"text-lg font-semibold text-white mb-2",children:"Connect Your Wallet"}),(0,l.jsx)("p",{className:"text-sm text-slate-400",children:"Connect your wallet to view your employment details"})]})]})}}},function(e){e.O(0,[288,478,971,117,744],function(){return e(e.s=9873)}),_N_E=e.O()}]);